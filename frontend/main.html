<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Not Hesaplama - Ana Ekran</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/main-screen.css">
    <link rel="stylesheet" href="css/detail-panel.css">
    <link rel="stylesheet" href="css/admin-panel.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body class="main-screen">
    <div class="background-gradient"></div>

    <!-- Header -->
    <header class="top-header">
        <div class="header-content">
            <div class="header-left">
                <svg class="header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 10v6M2 10l10-5 10 5-10 5z" />
                    <path d="M6 12v5c3 3 9 3 12 0v-5" />
                </svg>
                <div>
                    <h1 class="header-title">Harf Hesaplama</h1>
                    <p class="header-subtitle" id="university-name">YÃ¼kleniyor...</p>
                </div>
            </div>

            <!-- KullanÄ±cÄ± Profili (Yeni) -->
            <div class="header-center gpa-display-large">
                <span
                    style="font-size: 0.6rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Genel
                    Ort.</span>
                <span id="overall-gpa"
                    style="font-size: 1.5rem; font-weight: 700; background: linear-gradient(135deg, var(--primary-light), var(--secondary)); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; line-height: 1.2;">-</span>
            </div>

            <div class="header-right">
                <button class="btn-header-action" id="btn-pending-approval" onclick="openPendingModal()"
                    style="display: none;" title="Onay Bekleyenler">
                    ðŸ“‹ <span class="badge" id="pending-count">0</span>
                </button>
                <button class="btn-header-action" id="btn-add-data" onclick="openAddModal()" title="Veri Ekle">
                    âž• Veri Ekle
                </button>
                <div class="user-profile">
                    <div class="avatar-circle">
                        <!-- GiriÅŸ tipine gÃ¶re ikon deÄŸiÅŸecek -->
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    </div>
                    <span id="user-role-label">Misafir</span>
                </div>

                <button class="btn-back" onclick="localStorage.clear(); window.location.href='index.html'">
                    Ã‡Ä±kÄ±ÅŸ
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        style="margin-left: 5px;">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                        <polyline points="16 17 21 12 16 7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Container (3 SÃ¼tunlu Grid Layout) -->
    <div class="main-container">
        <!-- SOL PANEL - Ders Listesi -->
        <div class="left-panel">
            <div class="panel-header">
                <h2>Dersler</h2>
                <span class="course-count" id="course-count">0 ders</span>
            </div>

            <div class="semester-list" id="semester-list">
                <!-- DÃ¶nemler buraya dinamik olarak eklenecek -->
                <div class="loading-skeleton">
                    <div class="skeleton-item"></div>
                    <div class="skeleton-item"></div>
                </div>
            </div>
        </div>

        <!-- ORTA PANEL - Hesaplama AlanÄ± -->
        <div class="center-panel">
            <div class="drop-zone" id="drop-zone">
                <div class="drop-zone-placeholder" id="drop-placeholder">
                    <svg class="placeholder-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2">
                        <path d="M12 5v14M5 12h14" />
                    </svg>
                    <h3>Ders SeÃ§in</h3>
                    <p>Sol panelden bir dersi seÃ§erek hesaplama yapÄ±n</p>
                </div>

                <div class="course-detail" id="course-detail" style="display: none;">
                    <!-- Ders detaylarÄ± (Kriterler ve Skala) buraya gelecek -->
                </div>
            </div>
        </div>

        <!-- SAÄž PANEL - Harf AralÄ±klarÄ± + Yorumlar -->
        <div class="right-panel">
            <!-- ÃœST: Harf AralÄ±klarÄ± -->
            <div class="right-sub-panel grade-scale-panel" id="grade-scale-panel">
                <div class="panel-header">
                    <h2>Harf AralÄ±klarÄ±</h2>
                </div>
                <div class="grade-scale-content" id="grade-scale-content">
                    <div class="grade-scale-placeholder">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="32"
                            height="32" style="opacity: 0.3; margin-bottom: 0.5rem;">
                            <path d="M4 7V4h16v3" />
                            <path d="M9 20h6" />
                            <path d="M12 4v16" />
                        </svg>
                        <p>Ders seÃ§ildiÄŸinde harf aralÄ±klarÄ± burada gÃ¶rÃ¼necek.</p>
                    </div>
                </div>
            </div>

            <!-- ALT: Yorumlar -->
            <div class="right-sub-panel comments-sub-panel">
                <div class="panel-header">
                    <h2><span id="comment-count">Yorumlar</span></h2>
                    <button class="btn-sort-comments" onclick="toggleSortMode()" title="En Ã‡ok BeÄŸenilen">ðŸ”¥</button>
                </div>

                <div class="comments-list" id="comments-list">
                    <div class="empty-comments">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="32"
                            height="32" style="opacity: 0.3; margin-bottom: 0.5rem;">
                            <path
                                d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                            </path>
                        </svg>
                        <p>HenÃ¼z ders seÃ§ilmedi.</p>
                    </div>
                </div>

                <!-- Yorum Ekleme Formu (User only) -->
                <div class="comment-form-container" id="comment-form"
                    style="display:none; padding: 0.75rem; border-top: 1px solid var(--border);">
                    <textarea class="comment-input" placeholder="Yorumunuzu yazÄ±n..." rows="2"></textarea>
                    <button class="btn-submit-comment" onclick="submitComment()">GÃ¶nder</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Modal Container -->
    <div id="admin-modal-container"></div>

    <script src="js/mock-data.js"></script>
    <script src="js/calculator.js"></script>
    <script src="js/dragdrop.js"></script>
    <script src="js/comments.js"></script>
    <script src="js/admin-panel.js"></script>
    <script src="js/main.js"></script>

    <!-- KullanÄ±cÄ± RolÃ¼nÃ¼ Script TarafÄ±nda da YÃ¶netmek Ä°Ã§in -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const userType = localStorage.getItem('userType');
            const loggedInUserId = localStorage.getItem('loggedInUserId');
            const loggedInUserName = localStorage.getItem('loggedInUserName');
            const roleLabel = document.getElementById('user-role-label');

            // loggedInUserId varsa o kullanÄ±cÄ±yÄ± yÃ¼kle, yoksa userType'a gÃ¶re belirle
            if (loggedInUserId && MOCK_DATA.mockUsers[loggedInUserId]) {
                MOCK_DATA.mockCurrentUser = loggedInUserId;
                const user = MOCK_DATA.mockUsers[loggedInUserId];
                const roleMap = {
                    'student': 'Ã–ÄŸrenci',
                    'admin': 'YÃ¶netici',
                    'superadmin': 'SÃ¼per Admin'
                };
                roleLabel.textContent = loggedInUserName || roleMap[user.role] || user.userName;
            } else if (userType === 'guest' || !userType) {
                MOCK_DATA.mockCurrentUser = null;
                roleLabel.textContent = 'Misafir';
            }

            // Admin panel rozetini gÃ¼ncelle
            if (typeof updatePendingBadge === 'function') {
                updatePendingBadge();
            }
        });
    </script>
</body>

</html>